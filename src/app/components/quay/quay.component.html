<div class="header">
    <h1>{{ appName }}</h1>
    <div class="controls">
    
    <mat-form-field>
    <mat-label>Enter a date range</mat-label>
    <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
        <input matStartDate formControlName="start" placeholder="Start date">
        <input matEndDate formControlName="end" placeholder="End date">
    </mat-date-range-input>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker></mat-date-range-picker>

    @if (range.controls.start.hasError('matStartDateInvalid')) {
        <mat-error>Invalid start date</mat-error>
    }
    @if (range.controls.end.hasError('matEndDateInvalid')) {
        <mat-error>Invalid end date</mat-error>
    }



    </mat-form-field>

    <button matFab extended (click)="onSyncClick()">
        <mat-icon>sync</mat-icon>
        Load
    </button>
  </div>

  <div class="zoom-controls">
  <label>
    Zoom Vertical (px/hora): 
    <input type="range" min="5" max="60" [value]="ratioPixelHora" (input)="onZoomVerticalChange($event)">
    {{ ratioPixelHora }} px/h
  </label>

  <label>
    Zoom Horizontal (% escala): 
    <input type="range" min="50" max="200" [value]="zoomPercent" (input)="onZoomHorizontalChange($event)">
    {{ zoomPercent }} %
  </label>
</div>
</div>

<div class="layout flex">
  <!-- Etiquetas a la izquierda -->
  <div class="time-labels flex flex-col">
    <div class="days-column" > <!-- [style.height.px]="quayPanelHeight"-->
      @for (day of days; track $index) {
        <div class="day-label" [style.height.px]="ratioPixelHora * 24" >
            {{ day | date: 'dd MMM' }}
          </div>
      }
      
    </div>
    <div class="hours-column" >
      @for (day of days; track $index) { <!-- [style.height.px]="quayPanelHeight"-->
        <div *ngFor="let hour of hours" class="hour-label" [style.height.px]="ratioPixelHora">
        {{ hour }}
      </div>
      }
    </div>
  </div>

  <!-- Contenedor del muelle y barcos -->
<div class="quay-container" [style.height.px]="quayPanelHeight" >
  @for (v of vessels; track v.id) {
    <div class="vessel"
    [style.left.%]="v.vslLeftPercent"
    [style.width.%]="v.vslWidthPercent"
    [style.top.%]="v.vslTopPercent"
    [style.height.%]="v.vslHeightPercent" cdkDrag (cdkDragStarted)="onDragStarted($event, v)" (cdkDragEnded)="onDragEnded($event, v)">
      <div class="vessel-label">{{ v.name }}</div>
      <div class="vessel-work" [style.marginTop.%]="v.secondaryTopPercent" [style.height.%]="v.secondaryHeightPercent" >
          {{ v.tb }}<br>
          {{v.tw}}<br>
          {{v.tc}}<br>
          {{v.td}}
          
      </div>
    </div>
  }
</div>

</div>
